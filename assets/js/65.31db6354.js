(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{382:function(e,s,a){"use strict";a.r(s);var r=a(7),t=Object(r.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h4",{attrs:{id:"_1-安装nameserver"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-安装nameserver"}},[e._v("#")]),e._v(" 1. 安装NameServer")]),e._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker pull rocketmqinc/rocketmq\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("创建存储目录")]),e._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("mkdir -p /mydata/docker/rocketmq/data/namesrv/logs /mydata/docker/rocketmq/data/namesrv/store\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("然后安装")]),e._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('docker run -d --restart=always --name rmqnamesrv --privileged=true -p 9876:9876  -v /docker/rocketmq/data/namesrv/logs:/root/logs -v /docker/rocketmq/data/namesrv/store:/root/store -e "MAX_POSSIBLE_HEAP=100000000" rocketmqinc/rocketmq sh mqnamesrv\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("相关参数说明")]),e._v(" "),s("div",{staticClass:"center-container"},[s("img",{attrs:{height:"300px",src:"https://cdn.jsdelivr.net/gh/Jia-Hongwei/picx-images-hosting@master/20240221/image.6pn8klgcbi.webp"}})]),s("h3",{attrs:{id:"_2-安装broker"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装broker"}},[e._v("#")]),e._v(" 2. 安装Broker")]),e._v(" "),s("p",[e._v("border配置：创建 broker.conf 配置文件 vi /mydata/docker/rocketmq/conf/broker.conf ，配置如下：")]),e._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("# 所属集群名称，如果节点较多可以配置多个\nbrokerClusterName = DefaultCluster \n#broker名称，master和slave使用相同的名称，表明他们的主从关系 \nbrokerName = broker-a \n#0表示Master，大于0表示不同的\nslave brokerId = 0 \n#表示几点做消息删除动作，默认是凌晨4点 \ndeleteWhen = 04 \n#在磁盘上保留消息的时长，单位是小时 \nfileReservedTime = 48 \n#有三个值：SYNC_MASTER，ASYNC_MASTER，SLAVE；同步和异步表示Master和Slave之间同步数据的机 制；\nbrokerRole = ASYNC_MASTER \n#刷盘策略，取值为：ASYNC_FLUSH，SYNC_FLUSH表示同步刷盘和异步刷盘；SYNC_FLUSH消息写入磁盘后 才返回成功状态，ASYNC_FLUSH不需要；\nflushDiskType = ASYNC_FLUSH \n# 设置broker节点所在服务器的ip地址 \nbrokerIP1 = 192.168.43.11 \n#剩余磁盘比例 \ndiskMaxUsedSpaceRatio=99\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br")])]),s("p",[e._v("安装：")]),e._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('docker run -d --restart=always --name rmqbroker --link rmqnamesrv:namesrv -p 10911:10911 -p 10909:10909 --privileged=true -v /mydata/docker/rocketmq/data/broker/logs:/root/logs -v /mydata/docker/rocketmq/data/broker/store:/root/store -v /mydata/docker/rocketmq/conf/broker.conf:/opt/rocketmq-4.4.0/conf/broker.conf -e "NAMESRV_ADDR=namesrv:9876" -e "MAX_POSSIBLE_HEAP=200000000" rocketmqinc/rocketmq sh mqbroker -c /opt/rocketmq-4.4.0/conf/broker.conf\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("相关参数说明：")]),e._v(" "),s("div",{staticClass:"center-container"},[s("img",{attrs:{height:"300px",src:"https://cdn.jsdelivr.net/gh/Jia-Hongwei/picx-images-hosting@master/20240221/image.9gwaso3rb8.webp"}})]),s("h3",{attrs:{id:"_3-安装控制台"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-安装控制台"}},[e._v("#")]),e._v(" 3. 安装控制台")]),e._v(" "),s("p",[e._v("拉取镜像")]),e._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker pull pangliang/rocketmq-console-ng\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("控制台安装：")]),e._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('docker run -d --restart=always --name rmqadmin -e "JAVA_OPTS=-Drocketmq.namesrv.addr=192.168.100.130:9876 -Dcom.rocketmq.sendMessageWithVIPChannel=false" -p 8080:8080 pangliang/rocketmq-console-ng\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("如果需要修改ip")]),e._v(" "),s("div",{staticClass:"language-text line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("docker stop rmqadmin\ndocker rm rmqadmin\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br")])]),s("p",[e._v("访问测试：http://192.168.43.11:8080")])])}),[],!1,null,null,null);s.default=t.exports}}]);